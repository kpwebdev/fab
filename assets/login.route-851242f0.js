import{u as p,r as i,A as f,a as b,b as j,j as e,L as w,s as N,Q as r,d as y,e as v}from"./index-78c3eb9e.js";import{F as S,b as c}from"./formik.esm-c3f751fe.js";import{l as C}from"./index-c76eee91.js";import{u as d}from"./useMutation-2e12c772.js";import"./index-e8e5dbb3.js";import"./utils-73056672.js";const F={email:"",password:""},K=()=>{const o=p();i.useContext(f);const{webAdminEmail:m}=i.useContext(b),n=j(),{mutate:u,isPending:t,error:l,data:I}=d({mutationFn:N,onSuccess:()=>{r.success("Successfully loggedIn."),o.invalidateQueries({queryKey:["user"]}),y.currentUser.email===m?n("/web-admin"):n("/nfc/dashboard")},onError:()=>{r.error("Something went wrong. Please contact admin for support.")}}),{isPending:a,error:L,data:E,mutate:g}=d({mutationFn:v,onSuccess:()=>{r.success("Successfully logged in with google."),o.invalidateQueries({queryKey:["user"]}),n("/nfc/dashboard")},onError:()=>{r.error("Something went wrong. Please contact admin for support.")}});return e.jsxs("div",{className:"t-flex t-flex-col t-gap-f-32 t-text-f-md",children:[e.jsxs("header",{children:[e.jsx("h2",{className:"t-text-f-4xl",children:"Welcome back!"}),e.jsx("h3",{className:"t-text-f-md",children:"Your Platform awaits."})]}),e.jsx(S,{initialValues:F,validationSchema:C,onSubmit:s=>{const{email:x,password:h}=s;u({email:x,password:h})},children:s=>e.jsxs("form",{onSubmit:s.handleSubmit,className:"t-flex t-flex-col t-gap-f-24",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"t-mb-f-8",children:"Email*"}),e.jsx(c,{type:"email",id:"email",name:"email",value:s.values.email,onChange:s.handleChange,required:!0,className:"form-control form-control-lg"}),s.errors.email&&s.touched.email&&e.jsx("p",{className:"t-text-red-500 t-text-f-xs t-mt-f-8",children:s.errors.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"t-mb-f-8",children:"Password*"}),e.jsx(c,{type:"password",id:"password",name:"password",value:s.values.password,onChange:s.handleChange,required:!0,className:"form-control form-control-lg"}),s.errors.password&&s.touched.password&&e.jsx("p",{className:"t-text-red-500 t-text-f-xs t-mt-f-8",children:s.errors.password})]}),l&&e.jsx("p",{className:"t-text-red-500 t-bg-red-100 t-py-f-8 t-px-f-2",children:l.message}),e.jsxs("div",{className:"t-flex t-flex-col t-gap-f-16",children:[e.jsx("button",{type:"submit",className:`f-btn-lg f-btn-primary t-text-center${t||a?" t-cursor-not-allowed":""}`,disabled:t||a,children:t?"Logging in...":"Login"}),e.jsxs("div",{className:"t-flex t-gap-f-24 t-items-center",children:[e.jsx("div",{className:"t-h-f-2 t-grow t-bg-f-primary-20"}),e.jsx("span",{children:"or"}),e.jsx("div",{className:"t-h-f-2 t-grow t-bg-f-primary-20"})]}),e.jsx("button",{type:"button",className:`f-btn-lg f-btn-primary-outline${t||a?" t-cursor-not-allowed":""}`,disabled:t||a,onClick:g,children:a?"Logging with google...":"Login with Google"})]})]})}),e.jsxs("p",{children:["Newbie? Your account is just a"," ",e.jsx(w,{to:"/nfc/authentication/sign-up",className:"t-text-f-primary-30",children:"sign-up"})," ","away!"]})]})};export{K as default};
