import{u as be,r as U,j as e,L as m,k as S,m as je,Q as h,n as ue,i as ge}from"./index-78c3eb9e.js";import{B as ye}from"./index.esm-c02dd2f1.js";import{b as we,A as ke,c as ve,d as He}from"./index.esm-1a1dfb4c.js";import{d as Ie,a as Fe}from"./banner-image-b9731e16.js";import{c as Pe}from"./index.esm-7e038133.js";import{b as Ce}from"./index.esm-bf715849.js";import{u as Ue}from"./useQuery-9453d533.js";import{u as L}from"./useMutation-2e12c772.js";import{u as Se,a as Le}from"./index-c76eee91.js";import{F as A,b as l,a as E}from"./formik.esm-c3f751fe.js";import{P as W}from"./lib-b78f4b15.js";import"./iconBase-ba412146.js";import"./utils-73056672.js";import"./index-e8e5dbb3.js";const Ge=()=>{const g=be(),[s,y]=U.useState(!1),[w,k]=U.useState(!1),{data:B,error:T,isError:Ae,isPending:M}=Ue({queryKey:["user"],queryFn:ge}),{mutate:D,isPending:x,isError:V,error:v}=L({mutationFn:je,onSuccess:()=>{h.success("Updated user data successfully."),g.invalidateQueries({queryKey:["user"]}),y(!1)},onError:()=>{h.error(`User data not updated. error: ${T.message}`),console.log(v)}}),{mutate:O,isPending:R,isError:Q,error:_}=L({mutationFn:ue,onSuccess:()=>{h.success("Updated the social medias successfully."),k(!1),g.invalidateQueries()},onError:()=>h.error("Failed updating the social medias. Please contact the web admin.")});if(M)return e.jsx("div",{className:"t-flex t-justify-center t-py-f-48",children:e.jsx("span",{className:"custom-loader"})});const{userName:q,fullName:H,companyName:I,role:$,website:z,contact:F,socialMedia:K,bannerImage:Y,profilePic:p,companyVision:G,companyAddress:J,profile:X,status:Ee,card:N}=B,[{href:Z,has:ee},{href:ae,has:te},{href:se,has:le},{href:re,has:ie},{href:ne,has:ce}]=K;return e.jsx("div",{children:e.jsx(A,{initialValues:{userName:q,fullName:H,companyName:I,role:$,website:z,contact:F,bannerImage:Y,profilePic:p,companyVision:G,companyAddress:J,fileBannerImage:"",fileProfilePic:""},validationSchema:Se,children:({errors:r,touched:c,handleChange:me,values:b,setFieldValue:d,setSubmitting:P,isSubmitting:j})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"t-h-f-144 t-bg-f-primary-30 t-relative t-rounded-f-8 t-overflow-hidden",children:[e.jsx("img",{src:b.bannerImage||Ie,alt:"Banner Image",className:"t-w-full t-h-full t-object-cover"}),s&&e.jsxs(e.Fragment,{children:[e.jsx("label",{htmlFor:"fileBannerImage",className:"t-absolute t-top-f-8 t-right-f-8 t-text-white t-text-3xl t-bg-f-primary-10 t-p-f-8 t-rounded-full t-cursor-pointer",children:e.jsx(ye,{})}),e.jsx("input",{type:"file",className:"t-hidden",name:"fileBannerImage",id:"fileBannerImage",onChange:i=>{const t=i.target.files[0],n=new FileReader;n.readAsDataURL(t),n.onload=()=>{d("fileBannerImage",i.target.files[0]),d("bannerImage",n.result)}}}),e.jsx(l,{type:!0})]})]}),e.jsxs("div",{className:"t-grid t-grid-cols-2 t-gap-f-48",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"t-flex t-items-end t-gap-f-8 t-ml-f-24 -t-mt-f-48 t-mb-f-24 t-z-10 t-relative",children:[e.jsxs("div",{className:"overflow-hidden t-relative t-rounded-f-8",children:[e.jsx("img",{src:b.profilePic||Fe,alt:"Profile Picture",className:"t-w-f-144 t-h-f-144 t-object-cover t-border-2 t-border-f-primary-70"}),s&&e.jsxs(e.Fragment,{children:[e.jsx("label",{htmlFor:"fileProfilePic",className:"t-absolute t-w-full t-h-full t-top-0 t-left-0 t-bg-f-primary-98 t-bg-opacity-50 t-cursor-pointer",children:e.jsx(we,{className:"t-absolute t-top-1/2 t-left-1/2 -t-translate-x-1/2 -t-translate-y-1/2 t-text-f-4xl t-text-f-primary-30"})}),e.jsx("input",{type:"file",name:"fileProfilePic",id:"fileProfilePic",className:"t-hidden",onChange:i=>{const t=i.target.files[0],n=new FileReader;n.readAsDataURL(t),n.onload=()=>{d("fileProfilePic",i.target.files[0]),d("profilePic",n.result)}}})]})]}),e.jsxs("header",{children:[e.jsx("h6",{className:"t-text-f-xl",children:H}),e.jsx("p",{className:"t-text-f-md",children:I})]})]}),e.jsxs(E,{className:"t-text-f-base",children:[e.jsxs("div",{className:"t-mb-f-16",children:[e.jsxs("div",{className:"row",children:[e.jsx("label",{htmlFor:"userName",className:"col-sm-2 col-form-label",children:"User Name"}),e.jsx("div",{className:"col-sm-10",children:e.jsxs("div",{className:"input-group",children:[e.jsx("span",{className:"input-group-text",children:`${window.location.origin.replace(/https?:\/\//,"")}/profiles/`}),e.jsx(l,{type:"text",className:"form-control",name:"userName",id:"userName",readOnly:!s,disabled:!s})]})})]}),r.userName&&c.userName&&e.jsx("p",{className:"t-text-red-500 t-bg-red-200 t-py-f-8 t-text-f-xs",children:r.userName})]}),e.jsxs("div",{className:"t-mb-f-16",children:[e.jsxs("div",{className:"row",children:[e.jsx("label",{htmlFor:"fullName",className:"col-sm-2 col-form-label",children:"Full Name"}),e.jsx("div",{className:"col-sm-10",children:e.jsx(l,{type:"text",className:"form-control",name:"fullName",id:"fullName",readOnly:!s,disabled:!s})})]}),r.fullName&&c.fullName&&e.jsx("p",{className:"t-text-red-500 t-bg-red-200 t-py-f-8 t-text-f-xs",children:r.fullName})]}),e.jsxs("div",{className:"t-mb-f-16",children:[e.jsxs("div",{className:"row",children:[e.jsx("label",{htmlFor:"companyName",className:"col-sm-2 col-form-label",children:"Company Name"}),e.jsx("div",{className:"col-sm-10",children:e.jsx(l,{type:"text",className:"form-control",name:"companyName",id:"companyName",readOnly:!s,disabled:!s})})]}),r.companyName&&c.companyName&&e.jsx("p",{className:"t-text-red-500 t-bg-red-200 t-py-f-8 t-text-f-xs",children:r.companyName})]}),e.jsxs("div",{className:"t-mb-f-16",children:[e.jsxs("div",{className:"row",children:[e.jsx("label",{htmlFor:"companyVision",className:"col-sm-2 col-form-label",children:"Company Vision"}),e.jsx("div",{className:"col-sm-10",children:e.jsx(l,{type:"text",className:"form-control",name:"companyVision",id:"companyVision",readOnly:!s,disabled:!s})})]}),r.companyVision&&c.companyVision&&e.jsx("p",{className:"t-text-red-500 t-bg-red-200 t-py-f-8 t-text-f-xs",children:r.companyVision})]}),e.jsxs("div",{className:"t-mb-f-16",children:[e.jsxs("div",{className:"row",children:[e.jsx("label",{htmlFor:"companyAddress",className:"col-sm-2 col-form-label",children:"Company Address"}),e.jsx("div",{className:"col-sm-10",children:e.jsx(l,{type:"text",className:"form-control",name:"companyAddress",id:"companyAddress",readOnly:!s,disabled:!s})})]}),r.companyAddress&&c.companyAddress&&e.jsx("p",{className:"t-text-red-500 t-bg-red-200 t-py-f-8 t-text-f-xs",children:r.companyAddress})]}),e.jsxs("div",{className:"t-mb-f-16",children:[e.jsxs("div",{className:"row",children:[e.jsx("label",{htmlFor:"role",className:"col-sm-2 col-form-label",children:"Role"}),e.jsx("div",{className:"col-sm-10",children:e.jsx(l,{type:"text",className:"form-control",name:"role",id:"role",readOnly:!s,disabled:!s})})]}),r.role&&c.role&&e.jsx("p",{className:"t-text-red-500 t-bg-red-200 t-py-f-8 t-text-f-xs",children:r.role})]}),e.jsxs("div",{className:"t-mb-f-16",children:[e.jsxs("div",{className:"row",children:[e.jsx("label",{htmlFor:"website",className:"col-sm-2 col-form-label",children:"Website"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("div",{className:"t-flex t-items-center t-gap-f-16",children:e.jsxs("div",{className:"input-group",children:[e.jsx("span",{className:"input-group-text",children:"http://"}),e.jsx(l,{type:"text",className:"form-control",name:"website",id:"website",readOnly:!s,disabled:!s})]})})})]}),r.website&&c.website&&e.jsx("p",{className:"t-text-red-500 t-bg-red-200 t-py-f-8 t-text-f-xs",children:r.website})]}),e.jsxs("div",{className:"row t-mb-f-16",children:[e.jsx("label",{htmlFor:"contact",className:"col-sm-2 col-form-label",children:"Contact"}),e.jsx("div",{className:"col-sm-10",children:e.jsx(W,{inputProps:{id:"contact",name:"contact",readOnly:!s},disabled:!s,inputClass:"form-control",inputStyle:{width:"100%"},country:"in",value:F,onChange:(i,t,n,a)=>me(n)})}),r.contact&&c.contact&&e.jsx("p",{className:"t-text-red-500 t-bg-red-200 t-py-f-8 t-text-f-xs",children:r.contact})]}),e.jsxs("div",{className:"row t-mb-f-16",children:[e.jsx("label",{htmlFor:"socialMedia",className:"col-sm-2 col-form-label",children:"Social"}),e.jsx("div",{className:"col-sm-10 t-flex t-justify-start",children:e.jsx(A,{initialValues:{hasFacebook:ee,facebookHref:Z,hasInstagram:te,instagramHref:ae,hasWhatsapp:le,whatsappNum:se,hasTwitter:ie,twitterHref:re,hasLinkedIn:ce,linkedInHref:ne},validationSchema:Le,children:({touched:i,errors:t,handleChange:n,values:a})=>e.jsx(e.Fragment,{children:e.jsxs("ul",{className:"t-flex t-gap-f-8 t-items-center t-justify-start t-relative",children:[a.hasFacebook&&!t.facebookHref&&a.facebookHref&&e.jsx(m,{to:a.facebookHref,target:"_blank",children:e.jsx(Pe,{className:"t-text-f-primary-40 t-text-f-md hover:t-text-f-primary-70"})}),a.hasInstagram&&!t.instagramHref&&a.instagramHref&&e.jsx(m,{to:a.instagramHref,target:"_blank",children:e.jsx(ke,{className:"t-text-f-primary-40 t-text-f-md hover:t-text-f-primary-70"})}),a.hasWhatsapp&&a.whatsappNum&&!t.whatsappNum&&e.jsx(m,{to:"https://wa.me/"+a.whatsappNum.replace(/[\s\+\(\)\-]/g,""),target:"_blank",children:e.jsx(Ce,{className:"t-text-f-primary-40 t-text-f-md hover:t-text-f-primary-70"})}),a.hasTwitter&&!t.twitterHref&&a.twitterHref&&e.jsx(m,{to:a.twitterHref,target:"_blank",children:e.jsx(ve,{className:"t-text-f-primary-40 t-text-f-md hover:t-text-f-primary-70"})}),a.hasLinkedIn&&!t.linkedInHref&&a.linkedInHref&&e.jsx(m,{to:a.linkedInHref,target:"_blank",children:e.jsx(He,{className:"t-text-f-primary-40 t-text-f-md hover:t-text-f-primary-70"})}),e.jsx("div",{className:"t-absolute -t-top-f-8 -t-right-f-8 t-translate-x-full",children:e.jsxs("div",{className:"dropdown",children:[e.jsx("button",{type:"button",className:"t-underline t-text-sm","aria-expanded":"false",onClick:()=>k(()=>!w),children:"Edit"}),w&&e.jsx("div",{className:"dropdown-menu show t-min-w-[500px] t-p-f-8 t-shadow-md",style:{transform:"translateY(-100%)"},children:e.jsxs(E,{children:[e.jsxs("div",{className:"t-mb-f-16",children:[e.jsxs("div",{className:"t-flex t-items-center t-gap-f-8",children:[e.jsxs("div",{className:"form-check",children:[e.jsx("label",{htmlFor:"hasFacebook",className:"form-check-label t-hidden t-mb-0",children:"Has facebook"}),e.jsx(l,{type:"checkbox",id:"hasFacebook",name:"hasFacebook",className:"form-check-input"})]}),e.jsxs("div",{className:"t-flex t-items-center t-gap-f-8",children:[e.jsx("label",{htmlFor:"facebookHref",className:"form-label t-min-w-fit t-mb-0",children:"Facebook Url:"}),e.jsx(l,{type:"url",id:"facebookHref",name:"facebookHref",className:"form-control",disabled:!a.hasFacebook})]})]}),t.facebookHref&&i.facebookHref&&e.jsx("p",{className:"t-text-red-500 t-text-f-sm t-mt-f-8",children:t.facebookHref})]}),e.jsxs("div",{className:"t-mb-f-16",children:[e.jsxs("div",{className:"t-flex t-items-center t-gap-f-8",children:[e.jsxs("div",{className:"form-check",children:[e.jsx("label",{htmlFor:"hasInstagram",className:"form-check-label t-hidden t-mb-0",children:"Has Instagram"}),e.jsx(l,{type:"checkbox",id:"hasInstagram",name:"hasInstagram",className:"form-check-input"})]}),e.jsxs("div",{className:"t-flex t-items-center t-gap-f-8",children:[e.jsx("label",{htmlFor:"instagramHref",className:"form-label t-min-w-fit t-mb-0",children:"Instagram Url:"}),e.jsx(l,{type:"url",id:"instagramHref",name:"instagramHref",className:"form-control",disabled:!a.hasInstagram})]})]}),t.instagramHref&&i.instagramHref&&e.jsx("p",{className:"t-text-red-500 t-text-f-sm t-mt-f-8",children:t.instagramHref})]}),e.jsxs("div",{className:"t-mb-f-16",children:[e.jsxs("div",{className:"t-flex t-items-center t-gap-f-8",children:[e.jsxs("div",{className:"form-check",children:[e.jsx("label",{htmlFor:"hasWhatsapp",className:"form-check-label t-hidden t-mb-0",children:"Has Whatsapp"}),e.jsx(l,{type:"checkbox",id:"hasWhatsapp",name:"hasWhatsapp",className:"form-check-input"})]}),e.jsxs("div",{className:"t-flex t-items-center t-gap-f-8",children:[e.jsx("label",{htmlFor:"whatsappNum",className:"form-label t-min-w-fit t-mb-0",children:"Whatsapp Number:"}),e.jsx(W,{type:"url",inputProps:{id:"whatsappNum",name:"whatsappNum"},inputStyle:{width:"100%"},inputClass:"form-control",country:"in",value:a.whatsappNum,onChange:(o,f,u,C)=>n(u),disabled:!a.hasWhatsapp})]})]}),t.whatsappNum&&i.whatsappNum&&e.jsx("p",{className:"t-text-red-500 t-text-f-sm t-mt-f-8",children:t.whatsappNum})]}),e.jsxs("div",{className:"t-mb-f-16",children:[e.jsxs("div",{className:"t-flex t-items-center t-gap-f-8",children:[e.jsxs("div",{className:"form-check",children:[e.jsx("label",{htmlFor:"hasTwitter",className:"form-check-label t-hidden t-mb-0",children:"Has Twitter"}),e.jsx(l,{type:"checkbox",id:"hasTwitter",name:"hasTwitter",className:"form-check-input"})]}),e.jsxs("div",{className:"t-flex t-items-center t-gap-f-8",children:[e.jsx("label",{htmlFor:"twitterHref",className:"form-label t-min-w-fit t-mb-0",children:"Twitter Url:"}),e.jsx(l,{type:"url",id:"twitterHref",name:"twitterHref",className:"form-control",disabled:!a.hasTwitter})]})]}),t.twitterHref&&i.twitterHref&&e.jsx("p",{className:"t-text-red-500 t-text-f-sm t-mt-f-8",children:t.twitterHref})]}),e.jsxs("div",{className:"t-mb-f-16",children:[e.jsxs("div",{className:"t-flex t-items-center t-gap-f-8",children:[e.jsxs("div",{className:"form-check",children:[e.jsx("label",{htmlFor:"hasLinkedIn",className:"form-check-label t-hidden t-mb-0",children:"Has LinkedIn"}),e.jsx(l,{type:"checkbox",id:"hasLinkedIn",name:"hasLinkedIn",className:"form-check-input"})]}),e.jsxs("div",{className:"t-flex t-items-center t-gap-f-8",children:[e.jsx("label",{htmlFor:"linkedInHref",className:"form-label t-min-w-fit t-mb-0",children:"LinkedIn Url:"}),e.jsx(l,{type:"url",id:"linkedInHref",name:"linkedInHref",className:"form-control",disabled:!a.hasLinkedIn})]})]}),t.linkedInHref&&i.linkedInHref&&e.jsx("p",{className:"t-text-red-500 t-text-f-sm t-mt-f-8",children:t.linkedInHref})]}),Q&&e.jsx("p",{className:"t-text-f-sm t-text-red-500 t-bg-red-200 t-py-f-8",children:_.message}),e.jsx("button",{type:"button",className:"f-btn-sm f-btn-primary",onClick:o=>{o.preventDefault();const{facebookHref:f,instagramHref:u,whatsappNum:C,twitterHref:de,linkedInHref:oe,hasFacebook:fe,hasInstagram:he,hasWhatsapp:xe,hasTwitter:pe,hasLinkedIn:Ne}=a;O([{title:"Facebook",has:fe,href:f},{title:"Instagram",has:he,href:u},{title:"Whatsapp",has:xe,href:C},{title:"Twitter",has:pe,href:de},{title:"LinkedIn",has:Ne,href:oe}])},children:R?"Saving...":"Save"})]})})]})})]})})})})]}),V&&e.jsx("p",{className:"t-text-red-500 t-bg-red-200 t-py-f-8",children:v.message}),e.jsx("div",{children:s?e.jsx("button",{type:"submit",disabled:x||j,className:`f-btn-md f-btn-primary t-px-f-56${x||j?" t-cursor-not-allowed":""}`,onClick:async i=>{i.preventDefault(),P(!0);const{fileBannerImage:t,fileProfilePic:n,...a}=b,o=await S("users",t,"banner-image"),f=await S("users",n,"profile-pic");P(!1),D({...a,bannerImage:o||p,profilePic:f||p})},children:x||j?"Updating...":"Save"}):e.jsx("button",{type:"button",className:"f-btn-md f-btn-primary-outline t-px-f-56",onClick:i=>{i.preventDefault(),y(!0)},children:"Edit"})})]})]}),e.jsx("div",{className:"t-flex t-flex-col t-justify-between t-py-f-48",children:e.jsxs("div",{className:"t-flex t-flex-col t-gap-f-24 t-px-f-96 t-text-center",children:[e.jsxs("div",{className:"t-flex t-flex-col t-gap-f-4",children:[e.jsx(m,{className:`f-btn-md f-btn-primary-outline ${N?"":"t-cursor-not-allowed t-pointer-events-none"}`,to:"/nfc/creation/digital-profile/template",children:X?"Customize Digital Profile":"Create Digital Profile"}),!N&&e.jsx("small",{className:"t-block t-text-start",children:"You can create digital profile only after creating a card."})]}),!N&&e.jsx(m,{className:"f-btn-md f-btn-primary",to:"/nfc/creation/physical-card",children:"Create your own fabtap"})]})})]})]})})})};export{Ge as default};
