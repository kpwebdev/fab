import{u as xe,r as pe,j as e,L as m,k as P,m as be,Q as h,n as Ne,i as je}from"./index-a5b5f57a.js";import{B as ue}from"./index.esm-a2796fe9.js";import{a as ge,b as ye,c as we,d as ke}from"./index.esm-5159fb20.js";import{d as ve,a as He}from"./banner-image-b9731e16.js";import{c as Ie}from"./index.esm-c6a81813.js";import{I as Fe}from"./index.esm-90e2c665.js";import{u as Pe}from"./useQuery-1ddb8325.js";import{u as C}from"./useMutation-b8516a97.js";import{u as Ce,a as Ue}from"./index-5de7a07b.js";import{F as U,a as l,b as L}from"./formik.esm-1686ef52.js";import{P as S}from"./lib-333a1482.js";import"./iconBase-8553e80e.js";import"./utils-73056672.js";import"./index-e8e5dbb3.js";const Ke=()=>{const g=xe(),[s,y]=pe.useState(!1),{data:A,error:E,isError:Le,isPending:W}=Pe({queryKey:["user"],queryFn:je}),{mutate:B,isPending:x,isError:T,error:w}=C({mutationFn:be,onSuccess:()=>{h.success("Updated user data successfully."),g.invalidateQueries({queryKey:["user"]}),y(!1)},onError:()=>{h.error(`User data not updated. error: ${E.message}`),console.log(w)}}),{mutate:M,isPending:V,isError:O,error:D}=C({mutationFn:Ne,onSuccess:()=>{h.success("Updated the social medias successfully."),g.invalidateQueries()},onError:()=>h.error("Failed updating the social medias. Please contact the web admin.")});if(W)return e.jsx("div",{className:"t-flex t-justify-center t-py-f-48",children:e.jsx("span",{className:"custom-loader"})});const{userName:R,fullName:k,companyName:v,role:Q,website:_,contact:H,socialMedia:q,bannerImage:$,profilePic:p,companyVision:z,companyAddress:K,profile:G,status:Se,card:b}=A,[{href:Y,has:J},{href:X,has:Z},{href:ee,has:ae},{href:te,has:se},{href:le,has:re}]=q;return e.jsx("div",{children:e.jsx(U,{initialValues:{userName:R,fullName:k,companyName:v,role:Q,website:_,contact:H,bannerImage:$,profilePic:p,companyVision:z,companyAddress:K,fileBannerImage:"",fileProfilePic:""},validationSchema:Ce,children:({errors:r,touched:n,handleChange:ie,values:N,setFieldValue:d,setSubmitting:I,isSubmitting:j})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"t-h-f-144 t-bg-f-primary-30 t-relative t-rounded-f-8 t-overflow-hidden",children:[e.jsx("img",{src:N.bannerImage||ve,alt:"Banner Image",className:"t-w-full t-h-full t-object-cover"}),s&&e.jsxs(e.Fragment,{children:[e.jsx("label",{htmlFor:"fileBannerImage",className:"t-absolute t-top-f-8 t-right-f-8 t-text-white t-text-3xl t-bg-f-primary-10 t-p-f-8 t-rounded-full t-cursor-pointer",children:e.jsx(ue,{})}),e.jsx("input",{type:"file",className:"t-hidden",name:"fileBannerImage",id:"fileBannerImage",onChange:i=>{const t=i.target.files[0],c=new FileReader;c.readAsDataURL(t),c.onload=()=>{d("fileBannerImage",i.target.files[0]),d("bannerImage",c.result)}}}),e.jsx(l,{type:!0})]})]}),e.jsxs("div",{className:"t-grid t-grid-cols-2 t-gap-f-48",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"t-flex t-items-end t-gap-f-8 t-ml-f-24 -t-mt-f-48 t-mb-f-24 t-z-10 t-relative",children:[e.jsxs("div",{className:"overflow-hidden t-relative t-rounded-f-8",children:[e.jsx("img",{src:N.profilePic||He,alt:"Profile Picture",className:"t-w-f-144 t-h-f-144 t-object-cover t-border-2 t-border-f-primary-70"}),s&&e.jsxs(e.Fragment,{children:[e.jsx("label",{htmlFor:"fileProfilePic",className:"t-absolute t-w-full t-h-full t-top-0 t-left-0 t-bg-f-primary-98 t-bg-opacity-50 t-cursor-pointer",children:e.jsx(ge,{className:"t-absolute t-top-1/2 t-left-1/2 -t-translate-x-1/2 -t-translate-y-1/2 t-text-f-4xl t-text-f-primary-30"})}),e.jsx("input",{type:"file",name:"fileProfilePic",id:"fileProfilePic",className:"t-hidden",onChange:i=>{const t=i.target.files[0],c=new FileReader;c.readAsDataURL(t),c.onload=()=>{d("fileProfilePic",i.target.files[0]),d("profilePic",c.result)}}})]})]}),e.jsxs("header",{children:[e.jsx("h6",{className:"t-text-f-xl",children:k}),e.jsx("p",{className:"t-text-f-md",children:v})]})]}),e.jsxs(L,{className:"t-text-f-base",children:[e.jsxs("div",{className:"t-mb-f-16",children:[e.jsxs("div",{className:"row",children:[e.jsx("label",{htmlFor:"userName",className:"col-sm-2 col-form-label",children:"User Name"}),e.jsx("div",{className:"col-sm-10",children:e.jsxs("div",{className:"input-group",children:[e.jsx("span",{className:"input-group-text",children:`${window.location.origin.replace(/https?:\/\//,"")}/profiles/`}),e.jsx(l,{type:"text",className:"form-control",name:"userName",id:"userName",readOnly:!s,disabled:!s})]})})]}),r.userName&&n.userName&&e.jsx("p",{className:"t-text-red-500 t-bg-red-200 t-py-f-8 t-text-f-xs",children:r.userName})]}),e.jsxs("div",{className:"t-mb-f-16",children:[e.jsxs("div",{className:"row",children:[e.jsx("label",{htmlFor:"fullName",className:"col-sm-2 col-form-label",children:"Full Name"}),e.jsx("div",{className:"col-sm-10",children:e.jsx(l,{type:"text",className:"form-control",name:"fullName",id:"fullName",readOnly:!s,disabled:!s})})]}),r.fullName&&n.fullName&&e.jsx("p",{className:"t-text-red-500 t-bg-red-200 t-py-f-8 t-text-f-xs",children:r.fullName})]}),e.jsxs("div",{className:"t-mb-f-16",children:[e.jsxs("div",{className:"row",children:[e.jsx("label",{htmlFor:"companyName",className:"col-sm-2 col-form-label",children:"Company Name"}),e.jsx("div",{className:"col-sm-10",children:e.jsx(l,{type:"text",className:"form-control",name:"companyName",id:"companyName",readOnly:!s,disabled:!s})})]}),r.companyName&&n.companyName&&e.jsx("p",{className:"t-text-red-500 t-bg-red-200 t-py-f-8 t-text-f-xs",children:r.companyName})]}),e.jsxs("div",{className:"t-mb-f-16",children:[e.jsxs("div",{className:"row",children:[e.jsx("label",{htmlFor:"companyVision",className:"col-sm-2 col-form-label",children:"Company Vision"}),e.jsx("div",{className:"col-sm-10",children:e.jsx(l,{type:"text",className:"form-control",name:"companyVision",id:"companyVision",readOnly:!s,disabled:!s})})]}),r.companyVision&&n.companyVision&&e.jsx("p",{className:"t-text-red-500 t-bg-red-200 t-py-f-8 t-text-f-xs",children:r.companyVision})]}),e.jsxs("div",{className:"t-mb-f-16",children:[e.jsxs("div",{className:"row",children:[e.jsx("label",{htmlFor:"companyAddress",className:"col-sm-2 col-form-label",children:"Company Address"}),e.jsx("div",{className:"col-sm-10",children:e.jsx(l,{type:"text",className:"form-control",name:"companyAddress",id:"companyAddress",readOnly:!s,disabled:!s})})]}),r.companyAddress&&n.companyAddress&&e.jsx("p",{className:"t-text-red-500 t-bg-red-200 t-py-f-8 t-text-f-xs",children:r.companyAddress})]}),e.jsxs("div",{className:"t-mb-f-16",children:[e.jsxs("div",{className:"row",children:[e.jsx("label",{htmlFor:"role",className:"col-sm-2 col-form-label",children:"Role"}),e.jsx("div",{className:"col-sm-10",children:e.jsx(l,{type:"text",className:"form-control",name:"role",id:"role",readOnly:!s,disabled:!s})})]}),r.role&&n.role&&e.jsx("p",{className:"t-text-red-500 t-bg-red-200 t-py-f-8 t-text-f-xs",children:r.role})]}),e.jsxs("div",{className:"t-mb-f-16",children:[e.jsxs("div",{className:"row",children:[e.jsx("label",{htmlFor:"website",className:"col-sm-2 col-form-label",children:"Website"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("div",{className:"t-flex t-items-center t-gap-f-16",children:e.jsxs("div",{className:"input-group",children:[e.jsx("span",{className:"input-group-text",children:"http://"}),e.jsx(l,{type:"text",className:"form-control",name:"website",id:"website",readOnly:!s,disabled:!s})]})})})]}),r.website&&n.website&&e.jsx("p",{className:"t-text-red-500 t-bg-red-200 t-py-f-8 t-text-f-xs",children:r.website})]}),e.jsxs("div",{className:"row t-mb-f-16",children:[e.jsx("label",{htmlFor:"contact",className:"col-sm-2 col-form-label",children:"Contact"}),e.jsx("div",{className:"col-sm-10",children:e.jsx(S,{inputProps:{id:"contact",name:"contact",readOnly:!s},disabled:!s,inputClass:"form-control",inputStyle:{width:"100%"},country:"in",value:H,onChange:(i,t,c,a)=>ie(c)})}),r.contact&&n.contact&&e.jsx("p",{className:"t-text-red-500 t-bg-red-200 t-py-f-8 t-text-f-xs",children:r.contact})]}),e.jsxs("div",{className:"row t-mb-f-16",children:[e.jsx("label",{htmlFor:"socialMedia",className:"col-sm-2 col-form-label",children:"Social"}),e.jsx("div",{className:"col-sm-10 t-flex t-justify-start",children:e.jsx(U,{initialValues:{hasFacebook:J,facebookHref:Y,hasInstagram:Z,instagramHref:X,hasWhatsapp:ae,whatsappNum:ee,hasTwitter:se,twitterHref:te,hasLinkedIn:re,linkedInHref:le},validationSchema:Ue,children:({touched:i,errors:t,handleChange:c,values:a})=>e.jsx(e.Fragment,{children:e.jsxs("ul",{className:"t-flex t-gap-f-8 t-items-center t-justify-start t-relative",children:[a.hasFacebook&&!t.facebookHref&&a.facebookHref&&e.jsx(m,{to:a.facebookHref,target:"_blank",children:e.jsx(Ie,{className:"t-text-f-primary-40 t-text-f-md hover:t-text-f-primary-70"})}),a.hasInstagram&&!t.instagramHref&&a.instagramHref&&e.jsx(m,{to:a.instagramHref,target:"_blank",children:e.jsx(ye,{className:"t-text-f-primary-40 t-text-f-md hover:t-text-f-primary-70"})}),a.hasWhatsapp&&a.whatsappNum&&!t.whatsappNum&&e.jsx(m,{to:"https://wa.me/"+a.whatsappNum.replace(/[\s\+\(\)\-]/g,""),target:"_blank",children:e.jsx(Fe,{className:"t-text-f-primary-40 t-text-f-md hover:t-text-f-primary-70"})}),a.hasTwitter&&!t.twitterHref&&a.twitterHref&&e.jsx(m,{to:a.twitterHref,target:"_blank",children:e.jsx(we,{className:"t-text-f-primary-40 t-text-f-md hover:t-text-f-primary-70"})}),a.hasLinkedIn&&!t.linkedInHref&&a.linkedInHref&&e.jsx(m,{to:a.linkedInHref,target:"_blank",children:e.jsx(ke,{className:"t-text-f-primary-40 t-text-f-md hover:t-text-f-primary-70"})}),e.jsx("div",{className:"t-absolute -t-top-f-8 -t-right-f-8 t-translate-x-full",children:e.jsxs("div",{className:"dropdown",children:[e.jsx("button",{className:"t-underline t-text-sm",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false","data-bs-auto-close":"false",children:"Edit"}),e.jsx("div",{className:"dropdown-menu t-min-w-[500px] t-p-f-8 t-shadow-md",children:e.jsxs(L,{children:[e.jsxs("div",{className:"t-mb-f-16",children:[e.jsxs("div",{className:"t-flex t-items-center t-gap-f-8",children:[e.jsxs("div",{className:"form-check",children:[e.jsx("label",{htmlFor:"hasFacebook",className:"form-check-label t-hidden t-mb-0",children:"Has facebook"}),e.jsx(l,{type:"checkbox",id:"hasFacebook",name:"hasFacebook",className:"form-check-input"})]}),e.jsxs("div",{className:"t-flex t-items-center t-gap-f-8",children:[e.jsx("label",{htmlFor:"facebookHref",className:"form-label t-min-w-fit t-mb-0",children:"Facebook Url:"}),e.jsx(l,{type:"url",id:"facebookHref",name:"facebookHref",className:"form-control",disabled:!a.hasFacebook})]})]}),t.facebookHref&&i.facebookHref&&e.jsx("p",{className:"t-text-red-500 t-text-f-sm t-mt-f-8",children:t.facebookHref})]}),e.jsxs("div",{className:"t-mb-f-16",children:[e.jsxs("div",{className:"t-flex t-items-center t-gap-f-8",children:[e.jsxs("div",{className:"form-check",children:[e.jsx("label",{htmlFor:"hasInstagram",className:"form-check-label t-hidden t-mb-0",children:"Has Instagram"}),e.jsx(l,{type:"checkbox",id:"hasInstagram",name:"hasInstagram",className:"form-check-input"})]}),e.jsxs("div",{className:"t-flex t-items-center t-gap-f-8",children:[e.jsx("label",{htmlFor:"instagramHref",className:"form-label t-min-w-fit t-mb-0",children:"Instagram Url:"}),e.jsx(l,{type:"url",id:"instagramHref",name:"instagramHref",className:"form-control",disabled:!a.hasInstagram})]})]}),t.instagramHref&&i.instagramHref&&e.jsx("p",{className:"t-text-red-500 t-text-f-sm t-mt-f-8",children:t.instagramHref})]}),e.jsxs("div",{className:"t-mb-f-16",children:[e.jsxs("div",{className:"t-flex t-items-center t-gap-f-8",children:[e.jsxs("div",{className:"form-check",children:[e.jsx("label",{htmlFor:"hasWhatsapp",className:"form-check-label t-hidden t-mb-0",children:"Has Whatsapp"}),e.jsx(l,{type:"checkbox",id:"hasWhatsapp",name:"hasWhatsapp",className:"form-check-input"})]}),e.jsxs("div",{className:"t-flex t-items-center t-gap-f-8",children:[e.jsx("label",{htmlFor:"whatsappNum",className:"form-label t-min-w-fit t-mb-0",children:"Whatsapp Number:"}),e.jsx(S,{type:"url",inputProps:{id:"whatsappNum",name:"whatsappNum"},inputStyle:{width:"100%"},inputClass:"form-control",country:"in",value:a.whatsappNum,onChange:(o,f,u,F)=>c(u),disabled:!a.hasWhatsapp})]})]}),t.whatsappNum&&i.whatsappNum&&e.jsx("p",{className:"t-text-red-500 t-text-f-sm t-mt-f-8",children:t.whatsappNum})]}),e.jsxs("div",{className:"t-mb-f-16",children:[e.jsxs("div",{className:"t-flex t-items-center t-gap-f-8",children:[e.jsxs("div",{className:"form-check",children:[e.jsx("label",{htmlFor:"hasTwitter",className:"form-check-label t-hidden t-mb-0",children:"Has Twitter"}),e.jsx(l,{type:"checkbox",id:"hasTwitter",name:"hasTwitter",className:"form-check-input"})]}),e.jsxs("div",{className:"t-flex t-items-center t-gap-f-8",children:[e.jsx("label",{htmlFor:"twitterHref",className:"form-label t-min-w-fit t-mb-0",children:"Twitter Url:"}),e.jsx(l,{type:"url",id:"twitterHref",name:"twitterHref",className:"form-control",disabled:!a.hasTwitter})]})]}),t.twitterHref&&i.twitterHref&&e.jsx("p",{className:"t-text-red-500 t-text-f-sm t-mt-f-8",children:t.twitterHref})]}),e.jsxs("div",{className:"t-mb-f-16",children:[e.jsxs("div",{className:"t-flex t-items-center t-gap-f-8",children:[e.jsxs("div",{className:"form-check",children:[e.jsx("label",{htmlFor:"hasLinkedIn",className:"form-check-label t-hidden t-mb-0",children:"Has LinkedIn"}),e.jsx(l,{type:"checkbox",id:"hasLinkedIn",name:"hasLinkedIn",className:"form-check-input"})]}),e.jsxs("div",{className:"t-flex t-items-center t-gap-f-8",children:[e.jsx("label",{htmlFor:"linkedInHref",className:"form-label t-min-w-fit t-mb-0",children:"LinkedIn Url:"}),e.jsx(l,{type:"url",id:"linkedInHref",name:"linkedInHref",className:"form-control",disabled:!a.hasLinkedIn})]})]}),t.linkedInHref&&i.linkedInHref&&e.jsx("p",{className:"t-text-red-500 t-text-f-sm t-mt-f-8",children:t.linkedInHref})]}),O&&e.jsx("p",{className:"t-text-f-sm t-text-red-500 t-bg-red-200 t-py-f-8",children:D.message}),e.jsx("button",{type:"button",className:"f-btn-sm f-btn-primary",onClick:o=>{o.preventDefault();const{facebookHref:f,instagramHref:u,whatsappNum:F,twitterHref:ce,linkedInHref:ne,hasFacebook:me,hasInstagram:de,hasWhatsapp:oe,hasTwitter:fe,hasLinkedIn:he}=a;M([{title:"Facebook",has:me,href:f},{title:"Instagram",has:de,href:u},{title:"Whatsapp",has:oe,href:F},{title:"Twitter",has:fe,href:ce},{title:"LinkedIn",has:he,href:ne}])},children:V?"Saving...":"Save"})]})})]})})]})})})})]}),T&&e.jsx("p",{className:"t-text-red-500 t-bg-red-200 t-py-f-8",children:w.message}),e.jsx("div",{children:s?e.jsx("button",{type:"submit",disabled:x||j,className:`f-btn-md f-btn-primary t-px-f-56${x||j?" t-cursor-not-allowed":""}`,onClick:async i=>{i.preventDefault(),I(!0);const{fileBannerImage:t,fileProfilePic:c,...a}=N,o=await P("users",t,"banner-image"),f=await P("users",c,"profile-pic");I(!1),B({...a,bannerImage:o||p,profilePic:f||p})},children:x||j?"Updating...":"Save"}):e.jsx("button",{type:"button",className:"f-btn-md f-btn-primary-outline t-px-f-56",onClick:i=>{i.preventDefault(),y(!0)},children:"Edit"})})]})]}),e.jsx("div",{className:"t-flex t-flex-col t-justify-between t-py-f-48",children:e.jsxs("div",{className:"t-flex t-flex-col t-gap-f-24 t-px-f-96 t-text-center",children:[e.jsxs("div",{className:"t-flex t-flex-col t-gap-f-4",children:[e.jsx(m,{className:`f-btn-md f-btn-primary-outline ${b?"":"t-cursor-not-allowed t-pointer-events-none"}`,to:"/nfc/creation/digital-profile/template",children:G?"Customize Digital Profile":"Create Digital Profile"}),!b&&e.jsx("small",{className:"t-block t-text-start",children:"You can create digital profile only after creating a card."})]}),!b&&e.jsx(m,{className:"f-btn-md f-btn-primary",to:"/nfc/creation/physical-card",children:"Create your own fabtap"})]})})]})]})})})};export{Ke as default};
